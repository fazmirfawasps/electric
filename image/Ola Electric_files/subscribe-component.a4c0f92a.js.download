"use strict";Vue.component("subscribe-component",{_scopeId:"data-v-74a65f04",owCSS:".subscribe[data-v-74a65f04]{position:relative}.subscribeBtn[data-v-74a65f04]{display:block;text-align:center;background:#000;border:none;cursor:pointer}.subscribeBtnDesktop[data-v-74a65f04]{width:100%;height:54px;padding:10px 20px;float:right}.subscribeBtnIpad[data-v-74a65f04]{min-width:126px;height:56px;position:absolute;right:0;top:0;margin:0}.subscribeBtnMobile[data-v-74a65f04]{width:100%;height:54px;font-weight:500}#subscriptionButton[data-v-74a65f04]:disabled{background:rgba(0,0,0,.5)}@media screen and (max-width:767px){.section1-heading br[data-v-74a65f04]{display:none}.detail-design .subscribe[data-v-74a65f04]{display:flex;align-items:center}.detail-design .subscribe>div[data-v-74a65f04]{width:70%}.detail-design .subscribe>button[data-v-74a65f04]{width:30%;margin:0}}@media only screen and (min-width:768px) and (max-width:1024px){.subs-wrapper[data-v-74a65f04]{display:flex;height:100%}.section1-heading[data-v-74a65f04]{margin-bottom:0;min-height:40px}.section1[data-v-74a65f04],.subscribe-wrapper[data-v-74a65f04]{display:flex;align-items:baseline;flex-direction:column;justify-content:space-around;margin-left:40px;flex:1}.subscribe-wrapper[data-v-74a65f04]{margin-right:40px}.subscribe[data-v-74a65f04]{display:flex;align-self:flex-end;width:100%}.subscribe div[data-v-74a65f04]{width:100%}}@media only screen and (min-width:1680px){.subscribeBtnDesktop[data-v-74a65f04]{width:100%;height:56px}}",render:function(){var e=this,t=e.$createElement,t=e._self._c||t;return t("div",{staticClass:"subs-wrapper",class:e.className,attrs:{id:"subscriptionContent"}},[t("div",{staticClass:"section1 showOnlyOnIpad"},[t("p",{staticClass:"black-primary fw-500 heading fs-default-xxxx lh-44 section1-heading",domProps:{innerHTML:e._s(e.getHighlightedText(e.sectionTitle))}}),e._v(" "),e.owRegistry["social-media-links"]?t("social-media-links",{attrs:{"modal-data":e.socialLinks,"boxed-links":!0}}):e._e()],1),e._v(" "),e.displayInput?t("div",{staticClass:"subscribe-wrapper showOnlyOnIpad"},[e.modalData.subtext?t("p",{staticClass:"black-secondary-txt lh-24 fs-default",style:{marginBottom:"0"}},[e._v("\n      "+e._s(e.sectionDescription)+"\n    ")]):e._e(),e._v(" "),t("div",{staticClass:"subscribe"},[e.owRegistry["input-component"]?t("input-component",{attrs:{placeholder:e.modalData.subscribeInputText,label:e.modalData.subscribeInputLabel,device:e.device,"need-focus":e.needFocus,"default-value":e.emailIdText,"input-error":e.inputError,debounce:""},on:{"input-change":e.onTextChange,onFocus:e.handleFocus}}):e._e(),e._v(" "),t("button",{staticClass:"white-primary subscribeBtn mdT fs-default-xx lh-32 subscribeBtnIpad",attrs:{id:"subscriptionButton",disabled:e.subscribeTrigger||e.needFocus&&e.submitDisabled},on:{click:e.onSubmit}},[e.subscribeTrigger?[e.owRegistry["ow-spinner"]?t("ow-spinner",{attrs:{color:"#fff",height:"7px",width:"7px"}}):e._e()]:[e._v("\n          "+e._s(e.modalData.subscribeBtnText)+"\n        ")]],2)],1)]):e._e(),e._v(" "),t("div",{staticClass:"section1 hideOnlyOnIpad"},[t("p",{staticClass:"black-primary fw-500 heading",class:"\n        section1-heading "+("desktop"===e.device?"fs-default-xxxxxx lh-44":"fs-default-xxx lh-28"),attrs:{id:"subscribe-heading"},domProps:{innerHTML:e._s(e.getHighlightedText(e.sectionTitle))}}),e._v(" "),e.modalData.subtext?t("p",{staticClass:"black-secondary-txt",class:"desktop"===e.device?"lh-24 fs-default":"lh-24 mlT",style:{marginTop:"desktop"===e.device?"32px":"20px",marginBottom:"desktop"===e.device?"52px":"20px"}},[e._v("\n      "+e._s(e.sectionDescription)+"\n    ")]):e._e()]),e._v(" "),e.displayInput?t("div",{staticClass:"subscribe-wrapper hideOnlyOnIpad"},[t("div",{staticClass:"subscribe"},[e.owRegistry["input-component"]?t("input-component",{attrs:{placeholder:e.modalData.subscribeInputText,label:e.modalData.subscribeInputLabel,device:e.device,"need-focus":e.needFocus,"default-value":e.emailIdText,"input-error":e.inputError,debounce:""},on:{"input-change":e.onTextChange,onFocus:e.handleFocus}}):e._e(),e._v(" "),t("button",{staticClass:"white-primary subscribeBtn mdT",class:"desktop"===e.device?"fs-default-xx lh-32 subscribeBtnDesktop":"fs-default subscribeBtnMobile",attrs:{id:"subscriptionButton",disabled:e.subscribeTrigger||e.needFocus&&e.submitDisabled},on:{click:e.onSubmit}},[e.subscribeTrigger?[e.owRegistry["ow-spinner"]?t("ow-spinner",{attrs:{color:"#fff",height:"7px",width:"7px"}}):e._e()]:[e._v("\n          "+e._s(e.modalData.subscribeBtnText)+"\n        ")]],2)],1)]):e._e(),e._v(" "),e.owRegistry["ow-ajax"]?t("ow-ajax",{attrs:{trigger:e.subscribeTrigger,method:"POST",url:"ola-electric/api/subscribe",body:e.subscribeBody},on:{error:e.subscribeErrorCB,success:e.subscribeSuccessCB}}):e._e()],1)},staticRenderFns:[],name:"Subscribe",props:{modalData:{type:Object,default:null},device:{type:String,default:null},className:{type:String,default:""},focusOnMount:{type:Boolean,default:!1},socialLinks:{type:Object,default:null}},data:function(){return{inputError:!1,emailIdText:"",subscribeTrigger:!1,sectionTitle:null,sectionDescription:null,displayInput:!0,needFocus:!1}},computed:{subscribeBody:function(){return{email:this.emailIdText}},submitDisabled:function(){return Boolean(this.inputError||!this.emailIdText)}},created:function(){this.updateSectionText()},mounted:function(){this.focusOnMount&&this.handleFocus(!0)},methods:{handleFocus:function(e){this.needFocus=e},updateSectionText:function(e){var t=this;e?(this.sectionTitle=e.title,this.sectionDescription=e.subtext,this.displayInput=!1,setTimeout(function(){t.updateSectionText(),t.displayInput=!0},3e3)):this.modalData&&(this.sectionTitle=this.modalData.title,this.sectionDescription=this.modalData.subtext)},validateEmail:function(e){if(!e)return!1;return Boolean(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e))},onTextChange:function(e){this.inputError=Boolean(e)&&!this.validateEmail(e),this.emailIdText=e},onSubmit:function(){this.needFocus=!0,this.subscribeTrigger||this.inputError||!this.emailIdText||(this.subscribeTrigger=!0,this.trackMoengageEvent("sub_email_added",{screen:"home",email:this.emailIdText}))},subscribeSuccessCB:function(){this.subscribeTrigger=!1,this.inputError=!1;var e=this.modalData&&this.modalData.subscribeSuccessDescription||"";this.updateSectionText({title:this.modalData&&this.modalData.subscribeSuccessTitle,subtext:e.replace("{{email}}",this.emailIdText)}),this.trackMoengageEvent("sub_success",{screen:"home",email:this.emailIdText}),window.Moengage&&window.Moengage.add_user_attribute("subscribe_email_id",this.emailIdText),window.fbq&&window.fbq("track","subscribe",{value:this.emailIdText}),window.dataLayer&&window.dataLayer.push({event:"subscribe"}),this.emailIdText=""},subscribeErrorCB:function(e){var e=e.xhr,t=(this.subscribeTrigger=!1,void 0),i=void 0;try{t=JSON.parse(e.response).message,i=JSON.parse(e.response).message}catch(e){t="Something wrong",i="Server is unavailable"}this.updateSectionText({title:this.modalData&&this.modalData.subscribeFailureTitle,subtext:t}),"Looks like you've already subscribed"===t&&this.updateSectionText({title:this.modalData&&this.modalData.subscribeAlreadyTitle,subtext:t}),this.trackMoengageEvent("sub_failure",{email:this.emailIdText,reason:i,screen:"home"})},onSubscribeAction:function(){!this.inputError&&this.emailIdText?(this.subscribeTrigger=!0,this.trackMoengageEvent("sub_email_added",{screen:"home",email:this.emailIdText})):this.toastMessage="Please enter a valid email"}}});
//# sourceMappingURL=../sourcemap/components/subscribe-component.a4c0f92a.js.map
